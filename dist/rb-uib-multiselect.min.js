/*!
 * rb-uib-multiselect
 * @version v0.0.1
 * @link https://github.com/blessonrajan/rb-uib-multiselect
 * @license MIT
 */
"use strict";angular.module("rb-uib-multiselect",["ui.bootstrap"]),angular.module("rb-uib-multiselect").directive("rbUibMultiselect",function(){return{restrict:"AE",scope:{inputOptions:"=",outputOptions:"=",maxLabels:"@",buttonClass:"@",menuClass:"@",selectText:"@",selectAllText:"@",clearAllText:"@",itemLabel:"&",buttonLabel:"&"},templateUrl:"rb-uib-multiselect.html",link:function(t,e,l){t.reset=function(){t.options=[],t.outputOptions=[],t.selectAll=!1},t.reset(),t.setDefaults=function(){void 0===t.maxLabels&&(t.maxLabels=t.options.length),t._itemLabel=t.itemLabel(),void 0===t._itemLabel&&(t._itemLabel=function(t){return" "+t.label}),t._buttonLabel=t.buttonLabel(),void 0===t._buttonLabel&&(t._buttonLabel=function(){if(0===t.outputOptions.length)return t.selectText;if(t.maxLabels<t.outputOptions.length)return"("+t.outputOptions.length+") Selected";var e=[];return angular.forEach(t.outputOptions,function(l){e.push(t._itemLabel(l))}),e.join(", ")}),void 0===t.selectText&&(t.selectText="Select"),void 0===t.selectAllText&&(t.selectAllText=" Select All"),void 0===t.clearAllText&&(t.clearAllText=" Clear All")},t.setDefaults(),t.prepareOptions=function(){t.reset(),angular.forEach(t.inputOptions,function(e){t.options.push({id:e.id,label:t._itemLabel(e),selected:e.selected||!1,source:e})}),t.updateOutput()},t.$watch("inputOptions",function(e){e&&t.prepareOptions()}),t.onItemClick=function(e,l){l.preventDefault(),e.selected=!e.selected,t.updateOutput()},t.onItemSelectionChange=function(){t.updateOutput()},t.onSelectAllClick=function(e){e.preventDefault(),t.selectAll=!t.selectAll,angular.forEach(t.options,function(e){e.selected=t.selectAll}),t.updateOutput()},t.updateOutput=function(){var e=[],l=!0;angular.forEach(t.options,function(t){t.selected===!0?e.push(t.source):l=!1}),t.selectAll=l,t.outputOptions=e}}}}),angular.module("rb-uib-multiselect").run(["$templateCache",function(t){var e='<div class="btn-group btn-block" uib-dropdown auto-close="outsideClick"><button type="button" class="btn btn-block" uib-dropdown-toggle ng-class="[buttonClass]">{{ _buttonLabel() }}</button><ul class="dropdown-menu" style="width: 100%;" uib-dropdown-menu role="menu" ng-class="[menuClass]"><li role="menuitem" ng-if="options.length > 0"><a href="#" ng-click="onSelectAllClick($event)">{{ selectAll ? clearAllText : selectAllText }}</a></li><li class="divider" ng-if="options.length > 0"></li><li role="menuitem" ng-repeat="o in options"><a href="#" ng-click="onItemClick(o, $event)"><input type="checkbox" ng-model="o.selected" ng-change="onItemSelectionChange()" ng-click="$event.stopPropagation()">{{ o.label }}</a></li></ul></div>';t.put("rb-uib-multiselect.html",e)}]);